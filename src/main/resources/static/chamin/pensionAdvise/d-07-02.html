<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>d-07-02</title>
    
    <link rel="stylesheet" href="../../css/common.css">
    <link rel="stylesheet" href="../../css/style.css">

</head>
<body>
    <div class="header">
        <div class="page_head">
            <a href="#" class="btn_back">
                <i class="ico"></i>
                <span class="blind">이전페이지로</span>
            </a>
        </div>
    </div>

    <div class="container">
        d-07-02 페이지
        
    </div>

    <!-- 요기서 부터-->

    <div class="popup_wrap d_07_02 fixed index01">
        <div class="popup_header">
            <h2><span>마이머플러 제안</span></h2>
            <button class="popup_close"><span>닫기</span></button>
        </div>
        <div class="popup_content">
            <div class="robo_offer_tit">
                <h3>마이머플러 로보어드바이저 제안<br>월평균 예상수령액</h3>
            </div>

            <!-- 21-05-11 tab 교체 -->
            <div class="tab-head">
                <ul role="tablist" class="tab-label">
                    <li class="tab-label-item"><a href="#tabPanel-1" role="tab" class="is_active">현재</a></li>
                    <li class="tab-label-item"><a href="#tabPanel-2" role="tab">제안</a></li>
                </ul>
            </div>

            <!-- 21-05-11 tab-panel 교체 / section 추가 -->
            <div class="tab-panel" id="tabPanel-1" role="tabpanel">
                <div class="section">
                    <div class="section-inner">

                        <div class="section-title">
                            <!-- 21-05-11 monthly-left 추가 -->
                            <div class="monthly-left">
                                <div class="monthly-left-value">
                                    <span class="title">월 연금 수령액</span>
                                    <span class="value">115</span>
                                    <em class="unit">만원</em>
                                </div>
                                <p class="txt">국민연금 포함, 총수령액 현재가치</p> <!-- 21-05-11 텍스트수정 -->
                            </div>

                            <div class="switch_box">
                                <span>국민연금</span>
                                <input type="checkbox" class="inp_switch" id="myAnn" checked>
                                <label for="myAnn"></label>
                            </div>
                        </div>

                        <div class="chart">
                            <p class="txt">(<span>만원</span>)</p>
                            <canvas id="myBarChart"></canvas>
                        </div>

                        
                        <!-- 제안상태일때만 보여집니다 -->
                        <div class="bar_box left_bar">
                            <span>로보제안을 따르면 개인연금과 퇴직연금(DB제외)에서 발생하는 총 연금수령액이 현재대비 46.1% 증가한 23,500만원이 될 것으로 예상합니다.</span>
                        </div>
                        <!-- 제안상태일때만 보여집니다-->

                    </div>
                </div>
                
                <!-- 21-05-11 추가 -->
                <div class="section">
                    <div class="section-inner">
                        <p class="txt">현재 보유상품 유지할 경우</p>
                        <div class="section-title">총 연금 수령액
                            <p><span class="value">666,000</span>
                            <em class="unit">만원</em></p>
                        </div>

                        <div class="assess signal-light">
                            <div class="assess-item">
                                <div class="assess-item-tit">국민연금<span class="pers">60%</span></div>
                                <div class="assess-item-value">
                                    <span class="value">145,111,521</span>
                                    <em class="unit">원</em>
                                </div>
                            </div>
        
                            <div class="assess-item">
                                <div class="assess-item-tit">퇴직연금<span class="pers">25%</span></div>
                                <div class="assess-item-value">
                                    <span class="value">145,111,521</span>
                                    <em class="unit">원</em>
                                </div>
                            </div>
        
                            <div class="assess-item">
                                <div class="assess-item-tit">개인연금<span class="pers">15%</span></div>
                                <div class="assess-item-value">
                                    <span class="value">145,111,521</span>
                                    <em class="unit">원</em>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 21-05-11 아코디언 변경 -->
                <div class="section">
                    <div class="accordion-wrap">
                        <div class="accordion">
                            <div class="accordion-head">
                                <p>[자료] 금감원 연금포털 / 웰스가이드</p><i class="ico arr_down"></i>
                            </div>
    
                            <div class="accordion-hidden">
                                <ul class="list_dots">
                                    <li class="list_dots-item">
                                        <p>
                                            <b>현재가치:</b>
                                            <span>미래에 수령할 연금(예정)수령액을 물가로 할인해서 현재가치 기준으로 표시한 금액입니다.</span>
                                        </p>
                                    </li>
                                    <li class="list_dots-item">
                                        <p>
                                            <b>월 연금 수령액:</b>
                                            <span>연금포털에서 제공하는 예시연금액을 머플러에서 사용하고 있는 
                                                기준물가(1.5%)로 할인해서 현재가치로 표시한 금액입니다.</span>
                                        </p>
                                    </li>
                                    <li class="list_dots-item">
                                        <p>
                                            <b>국민연금 예시수령액:</b>
                                            <span>만 60세까지 중단없이 납부할 경우, 
                                                매월 받게 되는 예상 연금 월 수령액입니다.</span>
                                        </p>
                                    </li>
                                    <li class="list_dots-item">
                                        <p>
                                            <b>퇴직연금, 개인연금 예시수령액:</b>
                                            <span>현재 기준의 연금수령액은 각 연금사업자가 산출한 예시금액이며, 
                                                연금수령 개시년월이 정확하게 반영되지 않을 수 있습니다. 
                                                머플러가 제안하는 연금수령액은 변경된 자문 내용을 기준으로 산출한 예시금액입니다.
                                            </span>
                                        </p>
                                    </li>
                                </ul>
                                <p class="txt">예시수령액은 향후 납입정보, 수익률, 기준물가 등 상황 변화에 따라 변동될 수 있으며 실제 수령금액과 다를 수 있습니다.</p>
                                
                            </div>
                            <!-- 1 -->
                        </div>
                    
                    </div>
                    <!-- //accordion -->
                </div>

                <!-- 21-05-11 section 및 비교박스 변경 -->
                <div class="section">
                    <div class="section-inner">
                        <div class="section-title">
                            <p>연평균 기대수익률<span class="txt">(국민연금 미포함)</span></p>
                        </div>
                        <div class="compare-wrap">
                            <div class="compare">
                                <div class="compare-box before">
                                    <p class="compare-box-head">현재</p>
                                    <div class="compare-box-con solo">
                                        <span class="txt_2x">
                                            <span class="value">2.9</span>
                                            <em class="unit">%</em>
                                        </span>
                                    </div>
                                </div>
                                <div class="compare-box-center">
                                    <div class="arr_wrap">
                                        <div class="arr_item">
                                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 22"><defs><clipPath><path fill="#ccc" fill-opacity=".514" d="m-7 1024.36h34v34h-34z"/></clipPath><clipPath><path fill="#aade87" fill-opacity=".472" d="m-6 1028.36h32v32h-32z"/></clipPath></defs><path d="m345.44 248.29l-194.29 194.28c-12.359 12.365-32.397 12.365-44.75 0-12.354-12.354-12.354-32.391 0-44.744l171.91-171.91-171.91-171.9c-12.354-12.359-12.354-32.394 0-44.748 12.354-12.359 32.391-12.359 44.75 0l194.29 194.28c6.177 6.18 9.262 14.271 9.262 22.366 0 8.099-3.091 16.196-9.267 22.373" transform="matrix(.03541-.00013.00013.03541 2.98 3.02)" fill="#ccc"/></svg>
                                        </div>
                                        <div class="arr_item">
                                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 22"><defs><clipPath><path fill="#ccc" fill-opacity=".514" d="m-7 1024.36h34v34h-34z"/></clipPath><clipPath><path fill="#aade87" fill-opacity=".472" d="m-6 1028.36h32v32h-32z"/></clipPath></defs><path d="m345.44 248.29l-194.29 194.28c-12.359 12.365-32.397 12.365-44.75 0-12.354-12.354-12.354-32.391 0-44.744l171.91-171.91-171.91-171.9c-12.354-12.359-12.354-32.394 0-44.748 12.354-12.359 32.391-12.359 44.75 0l194.29 194.28c6.177 6.18 9.262 14.271 9.262 22.366 0 8.099-3.091 16.196-9.267 22.373" transform="matrix(.03541-.00013.00013.03541 2.98 3.02)" fill="#ccc"/></svg>
                                        </div>
                                        <div class="arr_item">
                                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 22"><defs><clipPath><path fill="#ccc" fill-opacity=".514" d="m-7 1024.36h34v34h-34z"/></clipPath><clipPath><path fill="#aade87" fill-opacity=".472" d="m-6 1028.36h32v32h-32z"/></clipPath></defs><path d="m345.44 248.29l-194.29 194.28c-12.359 12.365-32.397 12.365-44.75 0-12.354-12.354-12.354-32.391 0-44.744l171.91-171.91-171.91-171.9c-12.354-12.359-12.354-32.394 0-44.748 12.354-12.359 32.391-12.359 44.75 0l194.29 194.28c6.177 6.18 9.262 14.271 9.262 22.366 0 8.099-3.091 16.196-9.267 22.373" transform="matrix(.03541-.00013.00013.03541 2.98 3.02)" fill="#ccc"/></svg>
                                        </div>
                                        <div class="arr_item">
                                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 22"><defs><clipPath><path fill="#ccc" fill-opacity=".514" d="m-7 1024.36h34v34h-34z"/></clipPath><clipPath><path fill="#aade87" fill-opacity=".472" d="m-6 1028.36h32v32h-32z"/></clipPath></defs><path d="m345.44 248.29l-194.29 194.28c-12.359 12.365-32.397 12.365-44.75 0-12.354-12.354-12.354-32.391 0-44.744l171.91-171.91-171.91-171.9c-12.354-12.359-12.354-32.394 0-44.748 12.354-12.359 32.391-12.359 44.75 0l194.29 194.28c6.177 6.18 9.262 14.271 9.262 22.366 0 8.099-3.091 16.196-9.267 22.373" transform="matrix(.03541-.00013.00013.03541 2.98 3.02)" fill="#ccc"/></svg>
                                        </div>
                                        <div class="arr_item">
                                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 22"><defs><clipPath><path fill="#00f" fill-opacity=".514" d="m-7 1024.36h34v34h-34z"/></clipPath><clipPath><path fill="#aade87" fill-opacity=".472" d="m-6 1028.36h32v32h-32z"/></clipPath></defs><path d="m345.44 248.29l-194.29 194.28c-12.359 12.365-32.397 12.365-44.75 0-12.354-12.354-12.354-32.391 0-44.744l171.91-171.91-171.91-171.9c-12.354-12.359-12.354-32.394 0-44.748 12.354-12.359 32.391-12.359 44.75 0l194.29 194.28c6.177 6.18 9.262 14.271 9.262 22.366 0 8.099-3.091 16.196-9.267 22.373" transform="matrix(.03541-.00013.00013.03541 2.98 3.02)" fill="#ccc"/></svg>
                                        </div>
                                    </div>
        
                                </div>
                                <div class="compare-box after">
                                    <p class="compare-box-head">제안</p>
                                    <div class="compare-box-con solo">
                                        <span class="txt_2x">
                                            <span class="value">4.9</span>
                                            <em class="unit">%</em>
                                        </span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 21-05-11 section 추가 -->
                <div class="section">
                    <div class="section-inner">
                        <div class="section-title">연금준비율</div>
                        <div class="flex reserve_rate">
                            <div class="cost">
                                <p class="tit">은퇴 후<br>월평균 생활비</p>
                                <p class="price"><span>300</span>만원</p>
                                <a href="#" class="btn"><span>변경</span></a>
                            </div>
                            <div class="rate">
                                <p>연금준비율</p>
    
    
                                <div class="acc_chart">
                                    <canvas id="myChart3" width="85px" height="85px"></canvas>
                                    <div class="tooltipCanvas">
                                        <span class="chart_value">38%</span>
                                    </div>
                                </div>
    
    
                            </div>
                        </div>
                    </div>
                </div>

                <div class="section">
                    <div class="section-inner">
                        <div class="assess">
                            <div class="assess-item">
                                <div class="assess-item-tit">은퇴 생활비</div>
                                <div class="assess-item-value">
                                    <span class="value">월 평균 250</span>
                                    <em class="unit">만원</em>
                                </div>
                            </div>
        
                            <div class="assess-item">
                                <div class="assess-item-tit">은퇴생활기간</div>
                                <div class="assess-item-value">
                                    <span class="value">21</span>
                                    <em class="unit">년</em>
                                </div>
                            </div>
        
                            <div class="assess-item">
                                <div class="assess-item-tit">A.총 은퇴 생활비</div>
                                <div class="assess-item-value">
                                    <span class="value">11,521</span>
                                    <em class="unit">만원</em>
                                </div>
                            </div>

                            <div class="assess-item">
                                <div class="assess-item-tit">B.총 연금 수령액</div>
                                <div class="assess-item-value">
                                    <span class="value">1,521</span>
                                    <em class="unit">만원</em>
                                </div>
                            </div>

                            <div class="assess-item">
                                <div class="assess-item-tit">연금준비율(B/A)</div>
                                <div class="assess-item-value">
                                    <span class="value">18</span>
                                    <em class="unit">%</em>
                                </div>
                            </div>
                        </div>
                        <p class="txt align_r">
                            <span>적정 연금준비율에 미달합니다</span>
                        </p>
                    </div>
                </div>
                
                <div class="box-gray">
                    <div class="box-inner">

                        <p class="txt">
                            <i>적정 연금준비율 :</i><span>60%</span> <br>
                            <i>연금 및 은퇴생활비 :</i><span>현재가치 기준</span> <br>
                            <i>할인율 :</i><span>물가상승률 1.5%</span> <br>
                            <i>연금수령 시작 나이 :</i><span>은퇴나이와 다를 수 있습니다.</span> 
                        </p>
                    </div>
                </div>

            </div>
    
            <div class="tab-panel" id="tabPanel-2" role="tabpanel">
                내용 02
            </div>

            <!-- 21-05-11 버튼 변경 -->
            <div class="modal-page-btn">
                <button class="bt bt-color"><span>확인</span></button>
            </div>
      
        </div>
    </div>
    <!-- //popup -->

    <script src="../../js/jquery-1.9.1.min.js"></script>
    <script src="../../js/chart.v2.9.4.js"></script>
    <script>

        $(document).ready(function(){
         
            //Popup
            $('.popup_close').click(function(){
                $(this).parents('.popup_wrap').hide();
            });

            //Tab
            $('.tab-label-item:nth-child(1) a').addClass('is_active');
            $('#tabPanel-1').show();

            $(".tab-label-item a").on("click", function(e){
                e.preventDefault();

                //label
                var target = $(this).attr("href");
                $(".tab-label-item a").removeClass("is_active");
                $(this).addClass("is_active");

                //panel
                $(".tab-panel").hide();
                $(target).show();
            });
        
            //accor
            $('.accor_title').click(function(){
                if($(this).find('.ico').hasClass('arr_down') === true){
                    $(this).next().show();
                    $(this).find('.ico').removeClass('arr_down').addClass('arr_up');
                }else{
                    $(this).next().hide();
                    $(this).find('.ico').removeClass('arr_up').addClass('arr_down');
                }
            });

            
            // Accordion
            $('.accordion-head').click(function(){
                if($(this).children('i').hasClass('arr_down') === true){
                    $(this).next().show();
                    $(this).children('i').removeClass('arr_down').addClass('arr_up');
                }else{
                    $(this).next().hide();
                    $(this).children('i').removeClass('arr_up').addClass('arr_down');
                }
            });
              


        });


    // options
    var options ={
        aspectRatio:4/3,
        tooltips: {
            enabled: false
        },
        responsible:false,
        scales: {
            xAxes: [{
                stacked: true,
                // barPercentage: 0.5, // ios 문제..
                display: true,
                beginAtZero: true,
                gridLines: {
                    display: false
                },
                ticks: {
                    min:60,
                    max:100,
                    autoSkip:true,
                    autoSkipPadding:10,
                    maxRotation:0
                },

            }],
            yAxes: [{
                stacked: true,
                display: true,
                gridLines: {
                    display: true,
                    borderDash:[2,5],
                    color:"#cccccc",
                    drawBorder: false
                },
                ticks:{
                    max: 300,
                    stepSize:75,
                    padding:12
                }
            }]
        },
        legend: {
            display: true,
            position:'bottom',
            fontColor:'#474747',
            labels:{
                usePointStyle: true,
                boxWidth:5,
                padding:10,
            }
        }
    }

    var data ={
        labels: ['60세','61세','62세','63세','64세','65세','66세','67세','68세','69세',
        '70세', '71세','72세','73세','74세','75세','76세','77세','78세','79세',
        '80세', '81세','82세','83세','84세','85세','86세','87세','88세','89세',
        '90세', '91세','92세','93세','94세','95세','96세','97세','98세','99세',
        '100세'],
        datasets: [{
            label: '국민연금',
            data: [50,50,50,50,50,50,50,50,50,50,
            100,100,100,100,100,100,100,100,100,100,
            100,100,100,100,100,50,50,50,50,50,
            50,50,50,50,50,50,50,50,50,50],
            backgroundColor: 'rgb(40, 209, 80)', //green
            borderColor: "#ffffff",
            borderWidth:0
        },{
            label: '퇴직연금',
            data: [0,0,0,0,0,0,0,0,0,0,
            0,0,0,0,0,70,70,70,70,70,
            20, 20, 20, 40, 40, 40,40,40,10,35,
            35,35,35,35,0,0,0,0,0,0,0],
            backgroundColor: 'rgb(253, 242, 106)', // yellow
            borderColor: "#ffffff",
            borderWidth:0
        },{
            label: '개인연금',
            data: [0,0,0,0,0,0,0,0,0,0,
            0,0,0,0,0, 20, 20, 20, 20, 20,
            20, 20, 20, 20, 20, 50,50,50,50,50,
            35,35,35,35,0,0,0,0,0,0,0],
            backgroundColor: 'rgb(255, 149, 43)', //orange
            borderColor: "#ffffff",
            borderWidth:0
        }]
    }

    // round corners
    Chart.pluginService.register({
        afterUpdate: function (chart) {
            if (chart.config.options.elements.arc.roundedCornersFor !== undefined) {
                var arc = chart.getDatasetMeta(0).data[chart.config.options.elements.arc.roundedCornersFor];
                arc.round = {
                    x: (chart.chartArea.left + chart.chartArea.right) / 2,
                    y: (chart.chartArea.top + chart.chartArea.bottom) / 2,
                    radius: (chart.outerRadius + chart.innerRadius) / 2,
                    thickness: (chart.outerRadius - chart.innerRadius) / 2,
                    backgroundColor: arc._model.backgroundColor
                }
            }
        },

        afterDraw: function (chart) {
            if (chart.config.options.elements.arc.roundedCornersFor !== undefined) {
                var ctx = chart.chart.ctx;
                var arc = chart.getDatasetMeta(0).data[chart.config.options.elements.arc.roundedCornersFor];
                var startAngle = Math.PI / 2 - arc._view.startAngle;
                var endAngle = Math.PI / 2 - arc._view.endAngle;

                ctx.save();
                ctx.translate(arc.round.x, arc.round.y);
                console.log(arc.round.startAngle)
                ctx.fillStyle = arc.round.backgroundColor;
                ctx.beginPath();
                ctx.arc(arc.round.radius * Math.sin(startAngle), arc.round.radius * Math.cos(startAngle), arc.round.thickness, 0, 2 * Math.PI);
                ctx.arc(arc.round.radius * Math.sin(endAngle), arc.round.radius * Math.cos(endAngle), arc.round.thickness, 0, 2 * Math.PI);
                ctx.closePath();
                ctx.fill();
                ctx.restore();
            }
        },
    });

    // draw options
    var options3 ={
        maintainAspectRatio: false,
        cutoutPercentage: 80,
        legend: {
            display: false,
        },
        tooltips: {
            enabled: false
        },
        layout: {
            padding: {
                left: 0,
                right: 0,
                top: 0,
                bottom: 0
            }
        },
        elements: {
            arc: {
                roundedCornersFor: 0
            }
        }
    }

    var selectBgColor = 'rgb(40, 209, 80)';
        
    //data3
    var data3={
        labels: ['주식'],
        datasets: [{
            label: '# of Votes',
            data: [38,100-50],
            backgroundColor: [
                selectBgColor
            ],
            borderWidth:0,
            hoverBackgroundColor:[
                selectBgColor
            ]
        }]
    }


    var ctbar = document.getElementById('myBarChart').getContext('2d');
    new Chart(ctbar, {
        type :'bar',
        data : data,
        options : options
    });

    
    var ctx3 = document.getElementById('myChart3').getContext('2d');
    new Chart(ctx3, {
        type :'doughnut',
        data : data3,
        options : options3
    });


</script>

</body>
</html>