package wg.webapp.util;

import org.springframework.stereotype.Component;

import com.fasterxml.jackson.core.JsonProcessingException;
import com.fasterxml.jackson.core.type.TypeReference;
import com.fasterxml.jackson.databind.JsonMappingException;
import com.fasterxml.jackson.databind.ObjectMapper;

@Component
public class EAIUtil {
	
	/**
	 * 전문으로 받은 문자열을 ValueMap으로 변환
	 * @param keyword 검색할 profile 명
	 * @return 존재 여부
	 * @throws JsonProcessingException 
	 * @throws JsonMappingException 
	 */
	public static ValueMap convertValueMapOfString(String eaiString) throws JsonMappingException, JsonProcessingException {
		ValueMap ds_result = new ValueMap();
		ObjectMapper objectMapper = new  ObjectMapper();
		
//		StringBuffer sb = new StringBuffer();
//		sb.append("{   \"dataHeader\": {     \"category\": \"API\",     \"resultCode\": \"200\",     \"resultMessage\": \"정상\",     \"processFlag\": \"A\",     \"processCode\": \"0000\",     \"processMessage\": \"\",     \"processTime\": 250,     \"successCode\": \"0\"   },   \"dataBody\": {     \"tlDataLngth\": \"009680\",     \"rqsPg\": \"1\",     \"rspnsCnt\": \"0020\",     \"prprtData\": \"                  \",     \"rcrdCnF\": \"Y\",     \"rspnsCd\": \"2\",     \"tlCnt\": \"1000\",     \"inptData\": \"서울시 강남구\",     \"Record1\": [       {         \"siGunGu\": \"강남구\",         \"ldNm\": \"개포로\",         \"addrPstSq\": \"602\",         \"bldngMngCd\": \"1168010300106550000019635\",         \"addrMppngSq\": \"001\",         \"ldNmCd\": \"116803122001\",         \"bldngSbNo\": \"0\",         \"ldNmMppngSq\": \"602\",         \"pstSq\": \"100000047\",         \"bldngNm\": \"구룡초등학교\",         \"lglDngCd\": \"1168010300\",         \"nwPstNo\": \"06305\",         \"bldngHdNo\": \"263\",         \"eupMyeonDong\": \"개포동\",         \"sido\": \"서울\",         \"cmbntnBldngMngCd\": \"1168031220010100026300000\",         \"ri\": \"                    \",         \"eupMyeonSq\": \"01\",         \"nwAddr\": \"서울 강남구 개포로\",         \"addr\": \"서울 강남구 개포동\",         \"eupMyeon\": \"                    \",         \"undrgrndF\": \"    \",         \"bnj\": \"655\",         \"aptDngExtnt\": \"                    \"       },       {         \"siGunGu\": \"강남구\",         \"ldNm\": \"개포로\",         \"addrPstSq\": \"602\",         \"bldngMngCd\": \"1168010300106560000019990\",         \"addrMppngSq\": \"001\",         \"ldNmCd\": \"116803122001\",         \"bldngSbNo\": \"0\",         \"ldNmMppngSq\": \"602\",         \"pstSq\": \"107698230\",         \"bldngNm\": \"                                        \",         \"lglDngCd\": \"1168010300\",         \"nwPstNo\": \"06310\",         \"bldngHdNo\": \"264\",         \"eupMyeonDong\": \"개포동\",         \"sido\": \"서울\",         \"cmbntnBldngMngCd\": \"1168031220010100026400000\",         \"ri\": \"                    \",         \"eupMyeonSq\": \"01\",         \"nwAddr\": \"서울 강남구 개포로\",         \"addr\": \"서울 강남구 개포동\",         \"eupMyeon\": \"                    \",         \"undrgrndF\": \"    \",         \"bnj\": \"656\",         \"aptDngExtnt\": \"                    \"       },       {         \"siGunGu\": \"강남구\",         \"ldNm\": \"개포로\",         \"addrPstSq\": \"602\",         \"bldngMngCd\": \"1168010300106560000019959\",         \"addrMppngSq\": \"001\",         \"ldNmCd\": \"116803122001\",         \"bldngSbNo\": \"0\",         \"ldNmMppngSq\": \"602\",         \"pstSq\": \"107698230\",         \"bldngNm\": \"개포래미안포레스트\",         \"lglDngCd\": \"1168010300\",         \"nwPstNo\": \"06310\",         \"bldngHdNo\": \"264\",         \"eupMyeonDong\": \"개포동\",         \"sido\": \"서울\",         \"cmbntnBldngMngCd\": \"1168031220010100026400000\",         \"ri\": \"                    \",         \"eupMyeonSq\": \"01\",         \"nwAddr\": \"서울 강남구 개포로\",         \"addr\": \"서울 강남구 개포동\",         \"eupMyeon\": \"                    \",         \"undrgrndF\": \"    \",         \"bnj\": \"656\",         \"aptDngExtnt\": \"101동~130동\"       },       {         \"siGunGu\": \"강남구\",         \"ldNm\": \"개포로\",         \"addrPstSq\": \"602\",         \"bldngMngCd\": \"1168010300106560000019957\",         \"addrMppngSq\": \"001\",         \"ldNmCd\": \"116803122001\",         \"bldngSbNo\": \"0\",         \"ldNmMppngSq\": \"602\",         \"pstSq\": \"107698230\",         \"bldngNm\": \"                                        \",         \"lglDngCd\": \"1168010300\",         \"nwPstNo\": \"06310\",         \"bldngHdNo\": \"264\",         \"eupMyeonDong\": \"개포동\",         \"sido\": \"서울\",         \"cmbntnBldngMngCd\": \"1168031220010100026400000\",         \"ri\": \"                    \",         \"eupMyeonSq\": \"01\",         \"nwAddr\": \"서울 강남구 개포로\",         \"addr\": \"서울 강남구 개포동\",         \"eupMyeon\": \"                    \",         \"undrgrndF\": \"    \",         \"bnj\": \"656-1\",         \"aptDngExtnt\": \"                    \"       },       {         \"siGunGu\": \"강남구\",         \"ldNm\": \"개포로\",         \"addrPstSq\": \"602\",         \"bldngMngCd\": \"1168010300106560000019957\",         \"addrMppngSq\": \"001\",         \"ldNmCd\": \"116803122001\",         \"bldngSbNo\": \"0\",         \"ldNmMppngSq\": \"602\",         \"pstSq\": \"107698230\",         \"bldngNm\": \"                                        \",         \"lglDngCd\": \"1168010300\",         \"nwPstNo\": \"06310\",         \"bldngHdNo\": \"264\",         \"eupMyeonDong\": \"개포동\",         \"sido\": \"서울\",         \"cmbntnBldngMngCd\": \"1168031220010100026400000\",         \"ri\": \"                    \",         \"eupMyeonSq\": \"01\",         \"nwAddr\": \"서울 강남구 개포로\",         \"addr\": \"서울 강남구 개포동\",         \"eupMyeon\": \"                    \",         \"undrgrndF\": \"    \",         \"bnj\": \"656-2\",         \"aptDngExtnt\": \"                    \"       },       {         \"siGunGu\": \"강남구\",         \"ldNm\": \"개포로\",         \"addrPstSq\": \"602\",         \"bldngMngCd\": \"1168010300106560000019957\",         \"addrMppngSq\": \"001\",         \"ldNmCd\": \"116803122001\",         \"bldngSbNo\": \"0\",         \"ldNmMppngSq\": \"602\",         \"pstSq\": \"107698230\",         \"bldngNm\": \"                                        \",         \"lglDngCd\": \"1168010300\",         \"nwPstNo\": \"06310\",         \"bldngHdNo\": \"264\",         \"eupMyeonDong\": \"개포동\",         \"sido\": \"서울\",         \"cmbntnBldngMngCd\": \"1168031220010100026400000\",         \"ri\": \"                    \",         \"eupMyeonSq\": \"01\",         \"nwAddr\": \"서울 강남구 개포로\",         \"addr\": \"서울 강남구 개포동\",         \"eupMyeon\": \"                    \",         \"undrgrndF\": \"    \",         \"bnj\": \"657\",         \"aptDngExtnt\": \"                    \"       },       {         \"siGunGu\": \"강남구\",         \"ldNm\": \"개포로\",         \"addrPstSq\": \"602\",         \"bldngMngCd\": \"1168010300106560000019957\",         \"addrMppngSq\": \"001\",         \"ldNmCd\": \"116803122001\",         \"bldngSbNo\": \"0\",         \"ldNmMppngSq\": \"602\",         \"pstSq\": \"107698230\",         \"bldngNm\": \"                                        \",         \"lglDngCd\": \"1168010300\",         \"nwPstNo\": \"06310\",         \"bldngHdNo\": \"264\",         \"eupMyeonDong\": \"개포동\",         \"sido\": \"서울\",         \"cmbntnBldngMngCd\": \"1168031220010100026400000\",         \"ri\": \"                    \",         \"eupMyeonSq\": \"01\",         \"nwAddr\": \"서울 강남구 개포로\",         \"addr\": \"서울 강남구 개포동\",         \"eupMyeon\": \"                    \",         \"undrgrndF\": \"    \",         \"bnj\": \"658\",         \"aptDngExtnt\": \"                    \"       },       {         \"siGunGu\": \"강남구\",         \"ldNm\": \"개포로\",         \"addrPstSq\": \"602\",         \"bldngMngCd\": \"1168010300106560000019957\",         \"addrMppngSq\": \"001\",         \"ldNmCd\": \"116803122001\",         \"bldngSbNo\": \"0\",         \"ldNmMppngSq\": \"602\",         \"pstSq\": \"107698230\",         \"bldngNm\": \"                                        \",         \"lglDngCd\": \"1168010300\",         \"nwPstNo\": \"06310\",         \"bldngHdNo\": \"264\",         \"eupMyeonDong\": \"개포동\",         \"sido\": \"서울\",         \"cmbntnBldngMngCd\": \"1168031220010100026400000\",         \"ri\": \"                    \",         \"eupMyeonSq\": \"01\",         \"nwAddr\": \"서울 강남구 개포로\",         \"addr\": \"서울 강남구 개포동\",         \"eupMyeon\": \"                    \",         \"undrgrndF\": \"    \",         \"bnj\": \"658-2\",         \"aptDngExtnt\": \"                    \"       },       {         \"siGunGu\": \"강남구\",         \"ldNm\": \"개포로\",         \"addrPstSq\": \"602\",         \"bldngMngCd\": \"1168010300106550004019666\",         \"addrMppngSq\": \"001\",         \"ldNmCd\": \"116803122001\",         \"bldngSbNo\": \"0\",         \"ldNmMppngSq\": \"602\",         \"pstSq\": \"100000046\",         \"bldngNm\": \"개포동메디시스빌딩\",         \"lglDngCd\": \"1168010300\",         \"nwPstNo\": \"06305\",         \"bldngHdNo\": \"265\",         \"eupMyeonDong\": \"개포동\",         \"sido\": \"서울\",         \"cmbntnBldngMngCd\": \"1168031220010100026500000\",         \"ri\": \"                    \",         \"eupMyeonSq\": \"01\",         \"nwAddr\": \"서울 강남구 개포로\",         \"addr\": \"서울 강남구 개포동\",         \"eupMyeon\": \"                    \",         \"undrgrndF\": \"    \",         \"bnj\": \"655-4\",         \"aptDngExtnt\": \"                    \"       },       {         \"siGunGu\": \"강남구\",         \"ldNm\": \"개포로\",         \"addrPstSq\": \"601\",         \"bldngMngCd\": \"1168010300106530000019607\",         \"addrMppngSq\": \"001\",         \"ldNmCd\": \"116803122001\",         \"bldngSbNo\": \"0\",         \"ldNmMppngSq\": \"601\",         \"pstSq\": \"100000012\",         \"bldngNm\": \"현대1차아파트\",         \"lglDngCd\": \"1168010300\",         \"nwPstNo\": \"06320\",         \"bldngHdNo\": \"303\",         \"eupMyeonDong\": \"개포동\",         \"sido\": \"서울\",         \"cmbntnBldngMngCd\": \"1168031220010100030300000\",         \"ri\": \"                    \",         \"eupMyeonSq\": \"01\",         \"nwAddr\": \"서울 강남구 개포로\",         \"addr\": \"서울 강남구 개포동\",         \"eupMyeon\": \"                    \",         \"undrgrndF\": \"    \",         \"bnj\": \"653\",         \"aptDngExtnt\": \"101동~106동\"       },       {         \"siGunGu\": \"강남구\",         \"ldNm\": \"개포로\",         \"addrPstSq\": \"601\",         \"bldngMngCd\": \"1168010300106520000019397\",         \"addrMppngSq\": \"001\",         \"ldNmCd\": \"116803122001\",         \"bldngSbNo\": \"0\",         \"ldNmMppngSq\": \"601\",         \"pstSq\": \"100000010\",         \"bldngNm\": \"우성3차아파트\",         \"lglDngCd\": \"1168010300\",         \"nwPstNo\": \"06319\",         \"bldngHdNo\": \"307\",         \"eupMyeonDong\": \"개포동\",         \"sido\": \"서울\",         \"cmbntnBldngMngCd\": \"1168031220010100030700000\",         \"ri\": \"                    \",         \"eupMyeonSq\": \"01\",         \"nwAddr\": \"서울 강남구 개포로\",         \"addr\": \"서울 강남구 개포동\",         \"eupMyeon\": \"                    \",         \"undrgrndF\": \"    \",         \"bnj\": \"652\",         \"aptDngExtnt\": \"                    \"       },       {         \"siGunGu\": \"강남구\",         \"ldNm\": \"개포로\",         \"addrPstSq\": \"601\",         \"bldngMngCd\": \"1168010300106510001019239\",         \"addrMppngSq\": \"001\",         \"ldNmCd\": \"116803122001\",         \"bldngSbNo\": \"0\",         \"ldNmMppngSq\": \"601\",         \"pstSq\": \"100000090\",         \"bldngNm\": \"우성9차아파트\",         \"lglDngCd\": \"1168010300\",         \"nwPstNo\": \"06318\",         \"bldngHdNo\": \"311\",         \"eupMyeonDong\": \"개포동\",         \"sido\": \"서울\",         \"cmbntnBldngMngCd\": \"1168031220010100031100000\",         \"ri\": \"                    \",         \"eupMyeonSq\": \"01\",         \"nwAddr\": \"서울 강남구 개포로\",         \"addr\": \"서울 강남구 개포동\",         \"eupMyeon\": \"                    \",         \"undrgrndF\": \"    \",         \"bnj\": \"651-1\",         \"aptDngExtnt\": \"901동~902동\"       },       {         \"siGunGu\": \"강남구\",         \"ldNm\": \"개포로\",         \"addrPstSq\": \"601\",         \"bldngMngCd\": \"1168010300101740000019173\",         \"addrMppngSq\": \"001\",         \"ldNmCd\": \"116803122001\",         \"bldngSbNo\": \"0\",         \"ldNmMppngSq\": \"601\",         \"pstSq\": \"100000024\",         \"bldngNm\": \"개일초등학교\",         \"lglDngCd\": \"1168010300\",         \"nwPstNo\": \"06323\",         \"bldngHdNo\": \"401\",         \"eupMyeonDong\": \"개포동\",         \"sido\": \"서울\",         \"cmbntnBldngMngCd\": \"1168031220010100040100000\",         \"ri\": \"                    \",         \"eupMyeonSq\": \"01\",         \"nwAddr\": \"서울 강남구 개포로\",         \"addr\": \"서울 강남구 개포동\",         \"eupMyeon\": \"                    \",         \"undrgrndF\": \"    \",         \"bnj\": \"174\",         \"aptDngExtnt\": \"                    \"       },       {         \"siGunGu\": \"강남구\",         \"ldNm\": \"개포로\",         \"addrPstSq\": \"601\",         \"bldngMngCd\": \"1168010300101730000019211\",         \"addrMppngSq\": \"001\",         \"ldNmCd\": \"116803122001\",         \"bldngSbNo\": \"0\",         \"ldNmMppngSq\": \"601\",         \"pstSq\": \"100000023\",         \"bldngNm\": \"개포고등학교\",         \"lglDngCd\": \"1168010300\",         \"nwPstNo\": \"06324\",         \"bldngHdNo\": \"402\",         \"eupMyeonDong\": \"개포동\",         \"sido\": \"서울\",         \"cmbntnBldngMngCd\": \"1168031220010100040200000\",         \"ri\": \"                    \",         \"eupMyeonSq\": \"01\",         \"nwAddr\": \"서울 강남구 개포로\",         \"addr\": \"서울 강남구 개포동\",         \"eupMyeon\": \"                    \",         \"undrgrndF\": \"    \",         \"bnj\": \"173\",         \"aptDngExtnt\": \"                    \"       },       {         \"siGunGu\": \"강남구\",         \"ldNm\": \"개포로\",         \"addrPstSq\": \"601\",         \"bldngMngCd\": \"1168010300101750004021095\",         \"addrMppngSq\": \"001\",         \"ldNmCd\": \"116803122001\",         \"bldngSbNo\": \"0\",         \"ldNmMppngSq\": \"601\",         \"pstSq\": \"106379514\",         \"bldngNm\": \"                                        \",         \"lglDngCd\": \"1168010300\",         \"nwPstNo\": \"06323\",         \"bldngHdNo\": \"403\",         \"eupMyeonDong\": \"개포동\",         \"sido\": \"서울\",         \"cmbntnBldngMngCd\": \"1168031220010100040300000\",         \"ri\": \"                    \",         \"eupMyeonSq\": \"01\",         \"nwAddr\": \"서울 강남구 개포로\",         \"addr\": \"서울 강남구 개포동\",         \"eupMyeon\": \"                    \",         \"undrgrndF\": \"    \",         \"bnj\": \"175\",         \"aptDngExtnt\": \"                    \"       },       {         \"siGunGu\": \"강남구\",         \"ldNm\": \"개포로\",         \"addrPstSq\": \"601\",         \"bldngMngCd\": \"1168010300101750003021083\",         \"addrMppngSq\": \"001\",         \"ldNmCd\": \"116803122001\",         \"bldngSbNo\": \"0\",         \"ldNmMppngSq\": \"601\",         \"pstSq\": \"100000017\",         \"bldngNm\": \"                                        \",         \"lglDngCd\": \"1168010300\",         \"nwPstNo\": \"06323\",         \"bldngHdNo\": \"403\",         \"eupMyeonDong\": \"개포동\",         \"sido\": \"서울\",         \"cmbntnBldngMngCd\": \"1168031220010110040300000\",         \"ri\": \"                    \",         \"eupMyeonSq\": \"01\",         \"nwAddr\": \"서울 강남구 개포로\",         \"addr\": \"서울 강남구 개포동\",         \"eupMyeon\": \"                    \",         \"undrgrndF\": \"지하\",         \"bnj\": \"175-3\",         \"aptDngExtnt\": \"                    \"       },       {         \"siGunGu\": \"강남구\",         \"ldNm\": \"개포로\",         \"addrPstSq\": \"601\",         \"bldngMngCd\": \"1168010300101750004021095\",         \"addrMppngSq\": \"001\",         \"ldNmCd\": \"116803122001\",         \"bldngSbNo\": \"0\",         \"ldNmMppngSq\": \"601\",         \"pstSq\": \"106379514\",         \"bldngNm\": \"                                        \",         \"lglDngCd\": \"1168010300\",         \"nwPstNo\": \"06323\",         \"bldngHdNo\": \"403\",         \"eupMyeonDong\": \"개포동\",         \"sido\": \"서울\",         \"cmbntnBldngMngCd\": \"1168031220010100040300000\",         \"ri\": \"                    \",         \"eupMyeonSq\": \"01\",         \"nwAddr\": \"서울 강남구 개포로\",         \"addr\": \"서울 강남구 개포동\",         \"eupMyeon\": \"                    \",         \"undrgrndF\": \"    \",         \"bnj\": \"175-4\",         \"aptDngExtnt\": \"                    \"       },       {         \"siGunGu\": \"강남구\",         \"ldNm\": \"개포로\",         \"addrPstSq\": \"601\",         \"bldngMngCd\": \"1168010300101750003021083\",         \"addrMppngSq\": \"001\",         \"ldNmCd\": \"116803122001\",         \"bldngSbNo\": \"0\",         \"ldNmMppngSq\": \"601\",         \"pstSq\": \"100000017\",         \"bldngNm\": \"                                        \",         \"lglDngCd\": \"1168010300\",         \"nwPstNo\": \"06323\",         \"bldngHdNo\": \"403\",         \"eupMyeonDong\": \"개포동\",         \"sido\": \"서울\",         \"cmbntnBldngMngCd\": \"1168031220010110040300000\",         \"ri\": \"                    \",         \"eupMyeonSq\": \"01\",         \"nwAddr\": \"서울 강남구 개포로\",         \"addr\": \"서울 강남구 개포동\",         \"eupMyeon\": \"                    \",         \"undrgrndF\": \"지하\",         \"bnj\": \"175-5\",         \"aptDngExtnt\": \"                    \"       },       {         \"siGunGu\": \"강남구\",         \"ldNm\": \"개포로\",         \"addrPstSq\": \"601\",         \"bldngMngCd\": \"1168010300101750003021083\",         \"addrMppngSq\": \"001\",         \"ldNmCd\": \"116803122001\",         \"bldngSbNo\": \"0\",         \"ldNmMppngSq\": \"601\",         \"pstSq\": \"100000017\",         \"bldngNm\": \"                                        \",         \"lglDngCd\": \"1168010300\",         \"nwPstNo\": \"06323\",         \"bldngHdNo\": \"403\",         \"eupMyeonDong\": \"개포동\",         \"sido\": \"서울\",         \"cmbntnBldngMngCd\": \"1168031220010110040300000\",         \"ri\": \"                    \",         \"eupMyeonSq\": \"01\",         \"nwAddr\": \"서울 강남구 개포로\",         \"addr\": \"서울 강남구 개포동\",         \"eupMyeon\": \"                    \",         \"undrgrndF\": \"지하\",         \"bnj\": \"176-4\",         \"aptDngExtnt\": \"                    \"       },       {         \"siGunGu\": \"강남구\",         \"ldNm\": \"개포로\",         \"addrPstSq\": \"601\",         \"bldngMngCd\": \"1168010300101750003021083\",         \"addrMppngSq\": \"001\",         \"ldNmCd\": \"116803122001\",         \"bldngSbNo\": \"0\",         \"ldNmMppngSq\": \"601\",         \"pstSq\": \"100000017\",         \"bldngNm\": \"                                        \",         \"lglDngCd\": \"1168010300\",         \"nwPstNo\": \"06323\",         \"bldngHdNo\": \"403\",         \"eupMyeonDong\": \"개포동\",         \"sido\": \"서울\",         \"cmbntnBldngMngCd\": \"1168031220010110040300000\",         \"ri\": \"                    \",         \"eupMyeonSq\": \"01\",         \"nwAddr\": \"서울 강남구 개포로\",         \"addr\": \"서울 강남구 개포동\",         \"eupMyeon\": \"                    \",         \"undrgrndF\": \"지하\",         \"bnj\": \"176-5\",         \"aptDngExtnt\": \"                    \"       }     ]   } }");
		
		ds_result = objectMapper.readValue(eaiString, new TypeReference<ValueMap>(){});
		
		return ds_result;
	}
	
	
	/**
	 * 전문으로 받은 문자열을 ValueMap으로 변환
	 * @param keyword 검색할 profile 명
	 * @return 존재 여부
	 * @throws JsonProcessingException 
	 * @throws JsonMappingException 
	 */
	public static ValueMap getValueMapOfEaiObject(String mapNm, ValueMap eaiObj) throws JsonMappingException, JsonProcessingException {
		ValueMap ds_result = new ValueMap();
		ObjectMapper objectMapper = new  ObjectMapper();
				
		ds_result = objectMapper.readValue(objectMapper.writeValueAsString(eaiObj.get(mapNm)), new TypeReference<ValueMap>(){}); 
		
		return ds_result;
	}
}
